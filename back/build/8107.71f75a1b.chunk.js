"use strict";(self.webpackChunkserver_provitask=self.webpackChunkserver_provitask||[]).push([[8107],{21289:(M,u,e)=>{e.d(u,{I:()=>t,U:()=>a});const t="strapi_stage",a="strapi_assignee"},56996:(M,u,e)=>{e.r(u),e.d(u,{InformationBoxEE:()=>H});var t=e(27279),a=e(61166),r=e(50236),l=e(35090),s=e(85898),d=e(71943),c=e(930),i=e(26781),o=e(40464),m=e(49402),g=e(21892),E=e(54920),v=e(36364),n=e(21289);function P(){const{initialData:W,layout:{uid:U},isSingleType:F,onChange:Q}=(0,a.useCMEditViewDataManager)(),V=(0,m.v9)(v._),{formatMessage:h}=(0,i.Z)(),{formatAPIError:X}=(0,a.useAPIErrorHandler)(),Y=(0,a.useNotification)(),{put:b}=(0,a.useFetchClient)(),{allowedActions:{canReadUsers:k},isLoading:K}=(0,a.useRBAC)({readUsers:V.settings.users.read}),{users:j,isLoading:G,isError:x}=(0,E.R)({},{enabled:!K&&k}),R=W?.[n.U]??null,A=async({value:p})=>{w.mutate({entityId:W.id,assigneeId:parseInt(p,10),uid:U})},w=(0,o.useMutation)(async({entityId:p,assigneeId:z,uid:y})=>{const L=F?"single-types":"collection-types",{data:{data:I}}=await b(`/admin/content-manager/${L}/${y}/${p}/assignee`,{data:{id:z}});return Q({target:{name:n.U,value:I[n.U]}},!0),I},{onSuccess(){Y({type:"success",message:{id:"content-manager.reviewWorkflows.assignee.notification.saved",defaultMessage:"Assignee updated"}})}});return t.createElement(l.g,{name:n.U,id:n.U},t.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(d.hQ,{clearLabel:h({id:"content-manager.reviewWorkflows.assignee.clear",defaultMessage:"Clear assignee"}),error:x&&k&&h({id:"content-manager.reviewWorkflows.assignee.error",defaultMessage:"An error occurred while fetching users"})||w.error&&X(w.error),disabled:!K&&!G&&j.length===0,name:n.U,id:n.U,value:R?R.id:null,onChange:p=>A({value:p}),onClear:()=>A({value:null}),placeholder:h({id:"content-manager.reviewWorkflows.assignee.placeholder",defaultMessage:"Select \u2026"}),label:h({id:"content-manager.reviewWorkflows.assignee.label",defaultMessage:"Assignee"}),loading:G||K||w.isLoading},j.map(p=>t.createElement(c.O,{key:p.id,value:p.id,textValue:(0,g.Gf)(p,h)},(0,g.Gf)(p,h))))))}var O=e(73105),N=e(35557),S=e(62475),D=e(45804),B=e(75021),T=e(38705),C=e(86978),f=e(52258),$=e(5318);function Z(){const{initialData:W,layout:{uid:U},isSingleType:F,onChange:Q}=(0,a.useCMEditViewDataManager)(),{put:V}=(0,a.useFetchClient)(),{formatMessage:h}=(0,i.Z)(),{formatAPIError:X}=(0,a.useAPIErrorHandler)(),Y=(0,a.useNotification)(),{meta:b,workflows:[k],isLoading:K}=(0,f.n)({filters:{contentTypes:U}}),{getFeature:j}=(0,B.q)(),[G,x]=t.useState(!1),R=j("review-workflows"),A=W?.[n.I]??null,w=(0,o.useMutation)(async({entityId:y,stageId:L,uid:I})=>{const J=F?"single-types":"collection-types",{data:{data:_}}=await V(`/admin/content-manager/${J}/${I}/${y}/stage`,{data:{id:L}});return Q({target:{name:n.I,value:_[n.I]}},!0),_},{onSuccess(){Y({type:"success",message:{id:"content-manager.reviewWorkflows.stage.notification.saved",defaultMessage:"Review stage updated"}})}}),p=async({value:y})=>{try{R?.[C.Ef]&&parseInt(R[C.Ef],10)<b.workflowCount?x("workflow"):R?.[C._X]&&parseInt(R[C._X],10)<k.stages.length?x("stage"):w.mutateAsync({entityId:W.id,stageId:y,uid:U})}catch{}},{themeColorName:z}=A?.color?(0,$.k)(A?.color):{};return t.createElement(t.Fragment,null,t.createElement(l.g,{name:n.I,id:n.I},t.createElement(s.k,{direction:"column",gap:2,alignItems:"stretch"},t.createElement(O.q4,{error:w.error&&X(w.error)||null,name:n.I,id:n.I,value:A?.id,onChange:y=>p({value:y}),label:h({id:"content-manager.reviewWorkflows.stage.label",defaultMessage:"Review stage"}),startIcon:t.createElement(s.k,{as:"span",height:2,background:A?.color,borderColor:z==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2,marginRight:"-3px"}),customizeContent:()=>t.createElement(s.k,{as:"span",justifyContent:"space-between",alignItems:"center",width:"100%"},t.createElement(N.Z,{textColor:"neutral800",ellipsis:!0},A?.name),K?t.createElement(S.a,{small:!0,style:{display:"flex"}}):null)},k?k.stages.map(({id:y,color:L,name:I})=>{const{themeColorName:J}=(0,$.k)(L);return t.createElement(O.ag,{key:y,startIcon:t.createElement(s.k,{height:2,background:L,borderColor:J==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),value:y,textValue:I},I)}):[]),t.createElement(D.c,null))),t.createElement(T.fC,{isOpen:G==="workflow",onClose:()=>x(!1)},t.createElement(T.Dx,null,h({id:"content-manager.reviewWorkflows.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(T.uT,null,h({id:"content-manager.reviewWorkflows.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."}))),t.createElement(T.fC,{isOpen:G==="stage",onClose:()=>x(!1)},t.createElement(T.Dx,null,h({id:"content-manager.reviewWorkflows.stages.limit.title",defaultMessage:"You have reached the limit of stages for this workflow in your plan"})),t.createElement(T.uT,null,h({id:"content-manager.reviewWorkflows.stages.limit.body",defaultMessage:"Try deleting some stages or contact Sales to enable more stages."}))))}function H(){const{isCreatingEntry:W,layout:{options:U}}=(0,a.useCMEditViewDataManager)(),F=U?.reviewWorkflows??!1;return t.createElement(r.d.Root,null,t.createElement(r.d.Title,null),F&&!W&&t.createElement(t.Fragment,null,t.createElement(Z,null),t.createElement(P,null)),t.createElement(r.d.Body,null))}},75021:(M,u,e)=>{e.d(u,{q:()=>l});var t=e(27279),a=e(61166),r=e(40464);function l({enabled:s}={enabled:!0}){const{get:d}=(0,a.useFetchClient)(),{data:c,isError:i,isLoading:o}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:E}}=await d("/admin/license-limit-information");return E},{enabled:s}),m=t.useMemo(()=>c??{},[c]),g=t.useCallback(E=>(m?.features??[]).find(n=>n.name===E)?.options??{},[m?.features]);return{license:m,getFeature:g,isError:i,isLoading:o}}},38705:(M,u,e)=>{e.d(u,{uT:()=>D,fC:()=>C,Dx:()=>S});var t=e(27279),a=e(35557),r=e(85898),l=e(81565),s=e(23851),d=e(52185),c=e(2667),i=e(37370),o=e(85305),m=e(70627),g=e.n(m),E=e(26781),v=e(72450);const n=e.p+"0cd5f8915b265d5b1856.png",P="limits-title",O="https://strapi.io/pricing-cloud",N="https://strapi.io/contact-sales";function S({children:f}){return t.createElement(a.Z,{variant:"alpha",id:P},f)}S.propTypes={children:g().node.isRequired};function D({children:f}){return t.createElement(a.Z,{variant:"omega"},f)}D.propTypes={children:g().node.isRequired};function B(){const{formatMessage:f}=(0,E.Z)();return t.createElement(r.k,{gap:2,paddingTop:4},t.createElement(i.Q,{variant:"default",isExternal:!0,href:O},f({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(i.Q,{variant:"tertiary",isExternal:!0,href:N},f({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const T=v.default.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:f})=>`-${f.spaces[7]}`};
  margin-top: ${({theme:f})=>`-${f.spaces[7]}`};
  width: 360px;
`;function C({children:f,isOpen:$,onClose:Z}){const{formatMessage:H}=(0,E.Z)();return $?t.createElement(l.P,{labelledBy:P},t.createElement(s.f,null,t.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},f,t.createElement(B,null)),t.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(T,{src:n,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(d.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(c.h,{icon:t.createElement(o.Z,null),"aria-label":H({id:"global.close",defaultMessage:"Close"}),onClick:Z})))))):null}C.defaultProps={isOpen:!1},C.propTypes={children:g().node.isRequired,isOpen:g().bool,onClose:g().func.isRequired}},86978:(M,u,e)=>{e.d(u,{$k:()=>i,Ef:()=>v,FT:()=>g,Nj:()=>c,Ot:()=>d,VS:()=>o,_X:()=>n,gu:()=>r,lv:()=>m,qZ:()=>l,sN:()=>a,uL:()=>E,x4:()=>s});var t=e(20640);const a="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",l="Settings/Review_Workflows/SET_WORKFLOW",s="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",d="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",c="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",i="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",o="Settings/Review_Workflows/WORKFLOW_UPDATE",m={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},g=t.W.colors.primary600,E={STAGE:"stage"},v="numberOfWorkflows",n="stagesPerWorkflow"},52258:(M,u,e)=>{e.d(u,{n:()=>r});var t=e(61166),a=e(40464);function r(l={}){const{get:s}=(0,t.useFetchClient)(),{id:d="",...c}=l,i={populate:"stages"},{data:o,isLoading:m,status:g,refetch:E}=(0,a.useQuery)(["review-workflows","workflows",d],async()=>(await s(`/admin/review-workflows/workflows/${d}`,{params:{...i,...c}})).data);let v=[];return d&&o?.data?v=[o.data]:Array.isArray(o?.data)&&(v=o.data),{meta:o?.meta??{},workflows:v,isLoading:m,status:g,refetch:E}}},5318:(M,u,e)=>{e.d(u,{k:()=>r,s:()=>l});var t=e(20640),a=e(86978);function r(s){if(!s)return null;const c=Object.entries(t.W.colors).filter(([,i])=>i.toUpperCase()===s.toUpperCase()).reduce((i,[o])=>(a.lv?.[o]&&(i=o),i),null);return c?{themeColorName:c,name:a.lv[c]}:null}function l(){return Object.entries(a.lv).map(([s,d])=>({hex:t.W.colors[s].toUpperCase(),name:d}))}},37370:(M,u,e)=>{e.d(u,{Q:()=>m});var t=e(74081),a=e(27279),r=e(72450),l=e(62629),s=e(8976),d=e(30413),c=e(10701),i=e(32370);const o=(0,r.default)(s.G)`
  text-decoration: none;

  &[aria-disabled='true'] {
    ${l.sg}
    &:active {
      ${l.sg}
    }
  }

  &:hover {
    ${l.yP}
  }

  &:active {
    ${l.tB}
  }

  ${l.PD}
`,m=a.forwardRef(({variant:g="default",startIcon:E,endIcon:v,disabled:n=!1,children:P,size:O="S",as:N=d.f,...S},D)=>{const B=O==="S"?2:"10px",T=4;return(0,t.jsxs)(o,{ref:D,"aria-disabled":n,size:O,variant:g,background:"buttonPrimary600",borderColor:"buttonPrimary600",hasRadius:!0,gap:2,inline:!0,paddingBottom:B,paddingLeft:T,paddingRight:T,paddingTop:B,pointerEvents:n?"none":void 0,...S,as:N||d.f,children:[E&&(0,t.jsx)(c.k,{"aria-hidden":!0,children:E}),(0,t.jsx)(i.Z,{variant:O==="S"?"pi":void 0,fontWeight:"bold",textColor:"buttonNeutral0",children:P}),v&&(0,t.jsx)(c.k,{"aria-hidden":!0,children:v})]})});m.displayName="LinkButton"}}]);
