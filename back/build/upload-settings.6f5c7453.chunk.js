"use strict";(self.webpackChunkserver_provitask=self.webpackChunkserver_provitask||[]).push([[695],{56752:($,v,e)=>{e.r(v),e.d(v,{SettingsPage:()=>h,default:()=>F});var t=e(27279),b=e(796),D=e(34041),C=e(51413),y=e(49969),M=e(1296),g=e(85898),S=e(52185),T=e(35557),z=e(90529),m=e(49899),u=e(94707),l=e(61166),B=e(82943),P=e(28107),L=e(6078),k=e.n(L),I=e(364),A=e(26781),N=e(11727),n=e(63955);const x=a=>a;var R=e(61815),U=e(43433),G=e.n(U);const H={isLoading:!0,isSubmiting:!1,initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},Z=(a,o)=>(0,R.ZP)(a,i=>{switch(o.type){case"CANCEL_CHANGES":{i.modifiedData=a.initialData;break}case"GET_DATA_SUCCEEDED":{i.isLoading=!1,i.initialData=o.data,i.modifiedData=o.data;break}case"ON_CHANGE":{G()(i,["modifiedData",...o.keys.split(".")],o.value);break}case"ON_SUBMIT":{i.isSubmiting=!0;break}case"SUBMIT_SUCCEEDED":{i.initialData=a.modifiedData,i.isSubmiting=!1;break}case"ON_SUBMIT_ERROR":{i.isSubmiting=!1;break}default:return a}}),h=()=>{const{formatMessage:a}=(0,A.Z)(),{lockApp:o,unlockApp:i}=(0,l.useOverlayBlocker)(),W=(0,l.useNotification)(),{get:X,put:j}=(0,l.useFetchClient)();(0,l.useFocusWhenNavigate)();const[{initialData:J,isLoading:K,isSubmiting:Q,modifiedData:d},c]=(0,t.useReducer)(Z,H,x),E=(0,t.useRef)(!0);(0,t.useEffect)(()=>{const r=P.Z.CancelToken.source(),Y=async()=>{try{const{data:{data:p}}=await X("/upload/settings",{cancelToken:r.token});c({type:"GET_DATA_SUCCEEDED",data:p})}catch(p){console.error(p)}};return E.current&&Y(),()=>{r.cancel("Operation canceled by the user."),E.current=!1}},[]);const O=k()(J,d),V=async s=>{if(s.preventDefault(),!O){o(),c({type:"ON_SUBMIT"});try{await j("/upload/settings",d),c({type:"SUBMIT_SUCCEEDED"}),W({type:"success",message:{id:"notification.form.success.fields"}})}catch(r){console.error(r),c({type:"ON_SUBMIT_ERROR"})}i()}},f=({target:{name:s,value:r}})=>{c({type:"ON_CHANGE",keys:s,value:r})};return t.createElement(b.o,{tabIndex:-1},t.createElement(I.q,{title:a({id:(0,n.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),t.createElement("form",{onSubmit:V},t.createElement(D.T,{title:a({id:(0,n.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:t.createElement(C.z,{disabled:O,"data-testid":"save-button",loading:Q,type:"submit",startIcon:t.createElement(B.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,n.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),t.createElement(y.D,null,K?t.createElement(l.LoadingIndicatorPage,null):t.createElement(M.A,null,t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:12},t.createElement(S.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(g.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(g.k,null,t.createElement(T.Z,{variant:"delta",as:"h2"},a({id:(0,n.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),t.createElement(z.r,{gap:6},t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"responsiveDimensions","data-testid":"responsiveDimensions",checked:d.responsiveDimensions,hint:a({id:(0,n.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,n.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"responsiveDimensions",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"sizeOptimization","data-testid":"sizeOptimization",checked:d.sizeOptimization,hint:a({id:(0,n.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,n.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"sizeOptimization",value:s.target.checked}})}})),t.createElement(m.P,{col:6,s:12},t.createElement(u.s,{"aria-label":"autoOrientation","data-testid":"autoOrientation",checked:d.autoOrientation,hint:a({id:(0,n.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,n.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:s=>{f({target:{name:"autoOrientation",value:s.target.checked}})}}))))))))))},F=()=>t.createElement(l.CheckPagePermissions,{permissions:N._I.settings},t.createElement(h,null))}}]);
